### :page_with_curl:04：【2019统考真题】请设计一个队列，要求满足：①初始时队列为空；②入队时，允许增加队列占用空间；③出队后，出队元素所占用的空间可重复利用，即整个队列所占用的空间只增不减；④入队操作和出队操作的时间复杂度始终保持为O(1)。请回答:
1) 该队列是应该选择链式存储结构，还是应该选择顺序存储结构？
2) 画出队列的初始状态，并给出判断队空和队满的条件 
3) 画出第一个元素入队后的队列状态
4) 给出入队操作和出队操作的基本过程
---

#### :writing_hand: 算法思想：
>- 1、 顺序存储无法满足要求②的队列占用空间随着入队操作而增加。根据要求来分析：要求①容易满足；链式存储方便开辟新空间，要求②容易满足；对于要求③，出队后的结点并不真正释放，用队头指针指向新的对头结点，新元素入队时，有空余结点则无须开辟新空间，赋值到队尾后的第一个空余结点即可，然后用队尾指针指向新的队尾结点。则就需要设计成一个首尾相接的循环单链表，类似于循环队列的思想。设置队头，队尾指针后，链式队列的入队操作和出队操作的时间复杂度均为O(1).要求④即可满足。因此，采用链式存储结构(两段式单向循环链表)，队头指针尾front，队尾指针尾rear
>- 2、 该循环链式队列的实现可以参考循环队列，不同之处在于循环链式队列可以方便的增加空间，出队的几点可以循环利用，入队时空间不够也可以动态增加。同样，循环链式队列也要区分队满和队空的情况，这里参考循环队列牺牲一个单元来判断。初始时，创建只有一个空闲结点的循环单链表，头指针front和尾指针rear均指向空闲结点，如下图所示。
![image test](/img/03-02-0401.png)

>- 队空的判断条件：front == rear
>- 队满的判断条件：front == rear->next
>- 3、插入第一个元素后的状态
![image test](/img/03-02-0402.png)
>- 4、操作的基本过程如下


<!-- ::: details 查看代码  -->
::: info  查看代码 :cup_with_straw:
```C
// 入队操作
若(front == rear->next) // 队满
    则在rear后面插入一个新的空闲结点
入队元素保存到rear所指结点中; rear=rear->next; 返回。

// 出队操作
若(front==rear) // 队空
    则出队失败, 返回;
取front所指结点中的元素e; front=front->next; 返回e。
```
:::

